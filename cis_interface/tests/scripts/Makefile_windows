IDIR = $(MAKEDIR)
CC = cl.exe
LINK = link.exe
CFLAGS = /I$(IDIR) $(CISCCFLAGS)

ODIR = $(MAKEDIR)
LDIR = $(MAKEDIR)

LIBS = $(CISLDFLAGS)

_DEPS = hellofunc.h
DEPS = $(IDIR)\$(_DEPS: = $(IDIR)\)

_OBJ = gcc_model.o hellofunc.o
OBJ = $(ODIR)\$(_OBJ: = $(ODIR)\)

.PHONY: all
all: gcc_model

gcc_model: $(OBJ)
	$(LINK) /OUT:$@.exe $** $(LIBS)

$(ODIR)\%.o: %.c $(DEPS)
	$(CC) /c $< -Fo$@ $(CFLAGS)

clean:
	rm -f $(ODIR)\\\*.o \*~ gcc_model.exe $(IDIR)\*\~ 
