

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; yggdrasil 0.10.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting started" href="getting_started.html" />
    <link rel="prev" title="Overview" href="includeme.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> yggdrasil
          

          
          </a>

          
            
            
              <div class="version">
                0.10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="includeme.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#conda-installation-recommended">Conda Installation (recommended)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manual-installation">Manual Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-defined-rapidjson">User Defined rapidjson</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-steps-on-windows">Additional Steps on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-steps-for-matlab-models">Additional Steps for Matlab Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-steps-for-r-models">Additional Steps for R Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-steps-for-rabbitmq-message-passing">Additional Steps for RabbitMQ Message Passing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="formatted_io.html">Formatted I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_client_io.html">Server/Client I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="autowrap.html">Autowrapping Model Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml.html">YAML Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_format_strings.html">C-Style Format Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_toc.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/index.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon2018/index.html">Welcome to the 2018 Crops in Silico Hackathon!</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon2019/index.html">Welcome to the 2019 Crops in Silico Hackathon!</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">yggdrasil</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/install.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<span id="install-rst"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="conda-installation-recommended">
<h2>Conda Installation (recommended)<a class="headerlink" href="#conda-installation-recommended" title="Permalink to this headline">¶</a></h2>
<p>There are conda distributions available for yggdrasil from
<a class="reference external" href="https://github.com/conda-forge/yggdrasil-feedstock">conda-forge</a>.
You can install yggdrasil from conda-forge by calling:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda install -c conda-forge yggdrasil
</pre></div>
</div>
<p>from your terminal prompt (or Anaconda prompt on Windows). This will
install yggdrasil and all of its dependencies in your active
conda environment from the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel.</p>
</div>
<div class="section" id="manual-installation">
<h2>Manual Installation<a class="headerlink" href="#manual-installation" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before installing yggdrasil from <code class="docutils literal notranslate"><span class="pre">pip</span></code> or the cloned repository, you
should install the non-Python dependencies, particularly the
ZeroMQ C and C++ libraries (see below).</p>
</div>
<p>If you do not want to use conda, yggdrasil can also be installed
from either <a class="reference external" href="https://pypi.org/project/yggdrasil-framework/">PyPI</a>
using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install yggdrasil-framework
</pre></div>
</div>
<p>or by cloning the <a class="reference external" href="https://git-scm.com/">Git</a> repository on
<a class="reference external" href="https://github.com/cropsinsilico/yggdrasil">Github</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone --recurse-submodules https://github.com/cropsinsilico/yggdrasil.git
</pre></div>
</div>
<p>and then building the distribution.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd yggdrasil
$ python setup.py install
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">--recurse-submodules</span></code> option was not included when cloning the repo,
you will need to run the following from within the repository before calling
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> to ensure that
<a class="reference external" href="http://rapidjson.org/">rapidjson</a> is cloned as a submodule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git submodule init
$ git submodule update
</pre></div>
</div>
<p>If you do not have admin privileges on the target machine, <code class="docutils literal notranslate"><span class="pre">--user</span></code> can be
added to the end of either the <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> installation commands.
When using the <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag, you may need to add the directory containing the
entry point scripts to your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable in order to use
yggdrasil command line tools (e.g. <code class="docutils literal notranslate"><span class="pre">yggrun</span></code>) without specifying
their full path. Usually, this directory can be found using the following
Python commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">distutils.sysconfig</span> <span class="k">import</span> <span class="n">get_python_lib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_python_lib</span><span class="p">(),</span> <span class="s1">&#39;../../../bin/&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The displayed path can then be added either on the command link or in a startup
script (e.g. <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code>), using one of the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export PATH=$PATH:&lt;scripts_dir&gt;  # (linux/osx, bash)
$ setenv PATH $PATH:&lt;scripts_dir&gt;  # (linux/osx, tcsh)
$ set PATH &quot;%PATH%:&lt;scripts_dir&gt;   # (windows)
</pre></div>
</div>
<p>These commands will only add the directory to your path for the current
session. For the change to be permanent on Linux/MacOS, the appropriate command
from above can be added to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code>. On
Windows (&gt;=7), the following command will permanently modify your path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ setx PATH &quot;%PATH%:&lt;scripts_dir&gt;
</pre></div>
</div>
<p>The changes will take affect the next time you open the terminal.</p>
</div>
<div class="section" id="user-defined-rapidjson">
<h2>User Defined rapidjson<a class="headerlink" href="#user-defined-rapidjson" title="Permalink to this headline">¶</a></h2>
<p>If you would like to use an existing installation of the
<a class="reference external" href="http://rapidjson.org/">rapidjson</a>
header-only library, you can pass the flag
<code class="docutils literal notranslate"><span class="pre">--rapidjson-include-dir=&lt;user_defined_dir&gt;</span></code> to either the <code class="docutils literal notranslate"><span class="pre">pip</span></code>
or <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> installation commands from above with the location of the
existing rapidjson include directory.</p>
</div>
<div class="section" id="additional-steps-on-windows">
<h2>Additional Steps on Windows<a class="headerlink" href="#additional-steps-on-windows" title="Permalink to this headline">¶</a></h2>
<p>As local communication on Windows is handled by ZeroMQ, running models written
in C or C++ will require installing the ZeroMQ libraries for C and C++.
If you install yggdrasil using conda, these will be installed
automatically as dependencies. If you are not using conda, you will need to
install them yourself.</p>
<p>Instructions for installing the ZeroMQ C and C++ libraries can be found
<a class="reference external" href="https://github.com/zeromq/czmq#building-and-installing">here</a>
At install (and any time <code class="docutils literal notranslate"><span class="pre">yggconfig</span></code> is called), yggdrasil will attempt
to search for those libraries in those directories specified by the <code class="docutils literal notranslate"><span class="pre">PATH</span></code>,
<code class="docutils literal notranslate"><span class="pre">INCLUDE</span></code>, and <code class="docutils literal notranslate"><span class="pre">LIB</span></code> environment variables. If yggdrasil complains
that it cannot find these libraries, you can manually set them in your
<code class="docutils literal notranslate"><span class="pre">.yggdrasil.cfg</span></code> file (See <a class="reference internal" href="config.html#config-rst"><span class="std std-ref">Configuration Options</span></a>).
If you install these libraries after installing yggdrasil you can re-configure
yggdrasil and have it search for the libraries again by calling <code class="docutils literal notranslate"><span class="pre">yggconfig</span></code>
from the command line or by setting the appropriate config options manually.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although not required, the ZeroMQ libraries are also recommended for message
passing on Linux and MacOS operating systems as the IPC V message queues
have default upper limits of 2048 bytes on some operating systems and will
have to send larger messages piecemeal, adding to the message passing
overhead.</p>
</div>
</div>
<div class="section" id="additional-steps-for-matlab-models">
<h2>Additional Steps for Matlab Models<a class="headerlink" href="#additional-steps-for-matlab-models" title="Permalink to this headline">¶</a></h2>
<p>To run Matlab models, you will need an existing Matlab installation and license and
the <code class="docutils literal notranslate"><span class="pre">matlab</span></code> executable must be on your path (i.e. you can call <code class="docutils literal notranslate"><span class="pre">matlab</span></code>
from the command line and a Matlab interpreter will open). If not already available on
the command line, you can enable it by adding the location of the executable to
your path. The executable is usually located within a ‘bin’ directory within the
directory that Matlab was installed. On Linux/Mac operating systems, this is done
using the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export PATH=$PATH:&lt;/PATH/TO/MATLAB/bin/&gt;
</pre></div>
</div>
<p>On Windows, this command should already be available.</p>
<p>While yggdrasil can now run Matlab models via the command line, it is still
recommended that you install the Matlab engine for Python if you will be running
Matlab models with yggdrasil frequently as using the engine reduces the time
added to model startup by starting Matlab.</p>
<p>yggdrasil will attempt to install the Matlab engine for Python at
install, but should it fail or if you want to use a non-default version of Matlab,
you can also do it manually. Instructions for installing the Matlab engine as a
Python package can be found on the
<a class="reference external" href="https://www.mathworks.com/help/matlab/matlab_external/install-the-matlab-engine-for-python.html">Mathworks website</a>. Once you have installed the Matlab engine as a python
package, you can re-configure yggdrasil by calling <code class="docutils literal notranslate"><span class="pre">yggconfig</span></code> from the command
line.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The version of Matlab that you are using will determine the versions of
Python that you can use with yggdrasil. The chart below shows the
versions of Python that are compatible with several versions of Matlab.
If you are using an incompatible version, the instructions above for manually
installing the Matlab engine as a Python package will fail with an error
message indicating which versions of Python you can use.</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Matlab Version</p></th>
<th class="head"><p>Max Python Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R2015b</p></td>
<td><p>2.7, 3.3, 3.4</p></td>
</tr>
<tr class="row-odd"><td><p>R2017a</p></td>
<td><p>2.7, 3.3, 3.4, 3.5</p></td>
</tr>
<tr class="row-even"><td><p>R2017b</p></td>
<td><p>2.7, 3.3, 3.4, 3.5, 3.6</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="additional-steps-for-r-models">
<h2>Additional Steps for R Models<a class="headerlink" href="#additional-steps-for-r-models" title="Permalink to this headline">¶</a></h2>
<p>To run R models, you will need to install the
<a class="reference external" href="https://www.r-project.org/">R interpreter</a> and the R packages
<a class="reference external" href="https://blog.rstudio.com/2018/03/26/reticulate-r-interface-to-python/">reticulate</a>
package for calling Python from R and
<a class="reference external" href="install.packages(&quot;zeallot&quot;)">zeallot</a>.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s2">&quot;reticulate&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s2">&quot;zeallot&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have issues installing on MacOS, check to make sure that <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">ar</span></code> returns
the system default (<code class="docutils literal notranslate"><span class="pre">/usr/bin/ar</span></code>). If you have another version of <code class="docutils literal notranslate"><span class="pre">ar</span></code>
installed (e.g. through homebrew’s binutils), it may cause conflicts.</p>
</div>
</div>
<div class="section" id="additional-steps-for-rabbitmq-message-passing">
<h2>Additional Steps for RabbitMQ Message Passing<a class="headerlink" href="#additional-steps-for-rabbitmq-message-passing" title="Permalink to this headline">¶</a></h2>
<p>RabbitMQ connections allow messages to be passed between models when the
models are not running on the same machine. To use these connections,
the framework must have access to a
RabbitMQ server. If you have access to an existing RabbitMQ server,
the information for that server be provided via the yggdrasil
config file (See
<a class="reference internal" href="config.html#config-rst"><span class="std std-ref">Configuration Options</span></a> for information on setting
config options).</p>
<p>Starting a local RabbitMQ Server is also relatively easy. Details on
downloading, installing, and starting a RabbitMQ server can be found
<a class="reference external" href="https://www.rabbitmq.com/download.html">here</a>. The default values
for RabbitMQ related properties in the config file are set to the defaults
for starting a RabbitMQ server.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="getting_started.html" class="btn btn-neutral float-right" title="Getting started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="includeme.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Meagan Lang, David Raila

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>